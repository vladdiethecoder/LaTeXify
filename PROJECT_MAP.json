{"p":"kb","k":"dir","role":"knowledge base resources and indices","deps":[],"iface":"","notes":"alias+classes"}
{"p":"kb/classes","k":"dir","role":"source LiX classes for staging into TEXMFHOME","deps":[],"iface":"","notes":"used by setup_classes"}
{"p":"kb/classes/tex/latex/lix","k":"dir","role":"lix.sty and class files (ieee, thesis, novel, etc.)","deps":[],"iface":"","notes":"source of truth"}
{"p":"kb/latex","k":"dir","role":"alias with faiss index and latex_docs metadata","deps":[],"iface":"","notes":"required files: faiss+latex_docs+chunks"}
{"p":"latexify","k":"dir","role":"top-level package for planning, kb, synthesis","deps":[],"iface":"","notes":"active pipeline root"}
{"p":"latexify/__init__.py","k":"file","role":"package marker for pipeline components and imports","deps":[],"iface":"","notes":""}
{"p":"latexify/agents","k":"dir","role":"tools and agents for class selection and diagnostics","deps":[],"iface":"","notes":"cli utilities"}
{"p":"latexify/agents/__init__.py","k":"file","role":"package marker for agents and their cli tools","deps":[],"iface":"","notes":""}
{"p":"latexify/agents/class_probe.py","k":"file","role":"probe class availability and suggest texlive installs","deps":[],"iface":"main();build_probe_tex()","notes":"writes jsonl logs"}
{"p":"latexify/kb","k":"dir","role":"knowledge base build, alias, and query utilities","deps":[],"iface":"","notes":"houses faiss tools"}
{"p":"latexify/kb/__init__.py","k":"file","role":"package marker for knowledge-base utilities and imports","deps":[],"iface":"","notes":""}
{"p":"latexify/kb/build_index_bgem3.py","k":"file","role":"bge-m3 embeddings to faiss with deterministic seeds","deps":["latexify/kb/kb_paths.py"],"iface":"main()","notes":"writes index+meta paths"}
{"p":"latexify/kb/build_index_compat.py","k":"file","role":"compat indexer from chunks or latex_docs fallback","deps":[],"iface":"build_index();main()","notes":"writes duplicate latex_docs.*"}
{"p":"latexify/kb/build_latex_kb.py","k":"file","role":"bootstrap minimal latex kb and optionally index it","deps":["latexify/kb/build_index_bgem3.py"],"iface":"main()","notes":"writes data and chunks"}
{"p":"latexify/kb/ensure_kb_alias.py","k":"file","role":"create kb/latex alias by linking or copying required files","deps":["latexify/kb/kb_paths.py"],"iface":"ensure_kb_alias();main()","notes":"stages payload jsonls"}
{"p":"latexify/kb/kb_paths.py","k":"file","role":"shared index path rules and link-or-copy helper","deps":[],"iface":"has_index(),link_or_copy()","notes":"required files constant"}
{"p":"latexify/kb/query_index.py","k":"file","role":"load faiss, encode query, mmr rerank, write evidence","deps":[],"iface":"build_context_bundle();main()","notes":"offline deterministic mode"}
{"p":"latexify/pipeline","k":"dir","role":"main retrieval, routing, planning and synthesis pipeline","deps":["latexify/kb"],"iface":"","notes":"phase-2 tasks"}
{"p":"latexify/pipeline/critic_agent.py","k":"file","role":"deterministic critic accepts first draft for tests","deps":[],"iface":"CriticAgent.review()","notes":"reads attempts from plan"}
{"p":"latexify/pipeline/model_backends.py","k":"file","role":"llama-cpp backend wrapper with multi-gpu and seeds","deps":[],"iface":"LlamaCppBackend.generate()","notes":"requires llama-cpp-python"}
{"p":"latexify/pipeline/model_router.py","k":"file","role":"choose model based on task kind and keywords","deps":[],"iface":"choose_model_for_text(task)","notes":"fallback chooser"}
{"p":"latexify/pipeline/phase2_run_task.py","k":"file","role":"cli orchestrator: retrieval → routing → critic loop → snippet","deps":["latexify/pipeline/retrieval_bundle.py","latexify/pipeline/specialist_router.py"],"iface":"main()","notes":"writes evidence jsonl"}
{"p":"latexify/pipeline/planner_scaffold.py","k":"file","role":"emit plan from layout/assets/consensus with placeholders","deps":[],"iface":"emit_plan();validate_plan()","notes":"pure helpers"}
{"p":"latexify/pipeline/retrieval_bundle.py","k":"file","role":"faiss search, sbert mmr, consensus attach, evidence log","deps":[],"iface":"build_context_bundle(task,indices,...)","notes":"graceful fallbacks"}
{"p":"latexify/pipeline/specialist_router.py","k":"file","role":"classify to text/table/math/figure specialists","deps":["latexify/pipeline/synth_shared.py"],"iface":"SpecialistRouter.route(bundle)","notes":"env gguf classifier"}
{"p":"latexify/pipeline/synth_figure.py","k":"file","role":"emit figure or table latex with labels","deps":["latexify/pipeline/synth_shared.py"],"iface":"synthesize(bundle)","notes":"uses graphicx"}
{"p":"latexify/pipeline/synth_figure_placeholder.py","k":"file","role":"emit placeholder figure or table when asset missing","deps":["latexify/pipeline/synth_shared.py"],"iface":"synthesize(bundle)","notes":"keeps build green"}
{"p":"latexify/pipeline/synth_formula.py","k":"file","role":"wrap math into labeled equation environment","deps":[],"iface":"synthesize(bundle)","notes":"adds amsmath"}
{"p":"latexify/pipeline/synth_latex.py","k":"file","role":"cli loads bundles, routes, writes tex and meta","deps":["latexify/pipeline/specialist_router.py"],"iface":"main();synthesize_snippet()","notes":"deterministic when seeded"}
{"p":"latexify/pipeline/synth_shared.py","k":"file","role":"sanitize, slugify, prompt cache, capability detect","deps":[],"iface":"sanitize_inline(),capabilities_from_text()","notes":"shared helpers"}
{"p":"latexify/pipeline/synth_table.py","k":"file","role":"html or pipes to booktabs tabular","deps":["latexify/pipeline/synth_shared.py"],"iface":"synthesize(bundle)","notes":"auto alignment"}
{"p":"latexify/pipeline/synth_text.py","k":"file","role":"produce section/abstract latex from user and rubric","deps":["latexify/pipeline/synth_shared.py"],"iface":"synthesize(bundle)","notes":"adds todo when uncertain"}
{"p":"latexify/utils","k":"dir","role":"support utilities for classes and latexmk config","deps":[],"iface":"","notes":""}
{"p":"latexify/utils/setup_classes.py","k":"file","role":"stage lix classes and write project latexmkrc","deps":[],"iface":"stage_lix(),write_latexmkrc()","notes":"idempotent"}
{"p":"main.py","k":"file","role":"convenience entry to run phase-2 tasks","deps":["latexify/pipeline/phase2_run_task.py"],"iface":"phase2_main()","notes":"adds repo root to sys.path"}
{"p":"scripts","k":"dir","role":"cli utilities for build, fix, consensus, indexing","deps":["latexify"],"iface":"","notes":"orchestration tools"}
{"p":"scripts/aggregate_tex.py","k":"file","role":"concatenate snippets into build/main.tex","deps":[],"iface":"main()","notes":"plan-driven"}
{"p":"scripts/aggregator.py","k":"file","role":"assemble document, stage assets, optional latexmk","deps":["latexify/utils/setup_classes.py"],"iface":"run_aggregator()","notes":"writes source map"}
{"p":"scripts/approve_fixes.py","k":"file","role":"promote successful auto-fixes into kb entries","deps":["latexify/kb/build_index_compat.py"],"iface":"main()","notes":"optional reindex"}
{"p":"scripts/auto_fix.py","k":"file","role":"parse logs, fetch kb hints, patch and recompile","deps":["latexify/kb/query_index.py"],"iface":"main()","notes":"writes fix report"}
{"p":"scripts/bin/class_selector.py","k":"file","role":"decide latex class from chunk statistics","deps":[],"iface":"decide(in_jsonl,out_json)","notes":"writes decision json"}
{"p":"scripts/block_consensus.py","k":"file","role":"consensus over backends, flag disagreements","deps":[],"iface":"main()","notes":"outputs refined blocks"}
{"p":"scripts/build_chunks.py","k":"file","role":"build role-aware chunks from refined blocks","deps":[],"iface":"main()","notes":"fallback strategies"}
{"p":"scripts/build_faiss_from_ocr.py","k":"file","role":"embed ocr jsonl and build faiss for search","deps":[],"iface":"main()","notes":"sentence-transformers"}
